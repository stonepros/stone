openstack:
- volumes: # attached to each instance
    count: 3
    size: 10 # GB
roles:
- [mon.a, mgr.x, osd.0, osd.1, osd.2, mds.a, client.a]
tasks:
- install:
- stone:
    log-ignorelist:
      - overall HEALTH_
      - \(MGR_DOWN\)
      - \(PG_
      - \(OSD_
      - \(OBJECT_
      - \(OSDMAP_FLAGS\)
- exec:
    mon.a:
      - stone restful create-key admin
      - stone restful create-self-signed-cert
      - stone restful restart
- workunit:
    clients:
      client.a:
        - rest/test-restful.sh
- exec:
    mon.a:
      - stone restful delete-key admin
      - stone restful list-keys | jq ".admin" | grep null

