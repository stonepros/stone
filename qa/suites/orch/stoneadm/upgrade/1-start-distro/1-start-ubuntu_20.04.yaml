os_type: ubuntu
os_version: "20.04"

tasks:
- stoneadm:
    image: docker.io/stone/stone:v15.2.0
    stoneadm_branch: v15.2.0
    stoneadm_git_url: https://github.com/stone/stone
    # avoid --cap-add=PTRACE + --privileged for older stoneadm versions
    allow_ptrace: false
    # deploy additional mons the "old" (octopus) way
    add_mons_via_daemon_add: true
    avoid_pacific_features: true

roles:
- - mon.a
  - mon.c
  - mgr.y
  - osd.0
  - osd.1
  - osd.2
  - osd.3
  - client.0
#   - stone.rgw.realm.zone.a # Disabled, needs 15.2.4 as an upgrade start
  - node-exporter.a
  - alertmanager.a
- - mon.b
  - mgr.x
  - osd.4
  - osd.5
  - osd.6
  - osd.7
  - client.1
  - prometheus.a
  - grafana.a
  - node-exporter.b
#  - stone.iscsi.iscsi.a  # needs later start point
