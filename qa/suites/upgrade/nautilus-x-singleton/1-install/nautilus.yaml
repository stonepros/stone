overrides:
  stone:
    log-ignorelist:
      - \(MON_DOWN\)
      - \(MGR_DOWN\)
      - slow request
      - Not found or unloadable
      - evicting unresponsive client
meta:
- desc: install stone/nautilus latest
tasks:
- install:
    branch: nautilus
    exclude_packages:
      - stone-mgr-stoneadm
      - stoneadm
- print: "**** done install nautilus"
- stone:
- print: "**** done stone"

# create a hit set test pool that will generate hit sets prior to octopus
- exec:
    mon.a:
      - sudo stone osd pool create test-hit-set-base 32
      - sudo stone osd pool create test-hit-set-cache 32
      - sudo stone osd tier add test-hit-set-base test-hit-set-cache
      - sudo stone osd pool set test-hit-set-cache hit_set_type bloom
      - sudo stone osd pool set test-hit-set-cache hit_set_count 32
      - sudo stone osd pool set test-hit-set-cache hit_set_period 15
      - rados -p test-hit-set-cache bench 30 write -b 1
